<!doctype html>
<html>

<head>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">

    <title>myscript-math-web : interact with your application</title>

    <link rel="stylesheet" href="../demo.css">

    <script src="../../../webcomponentsjs/webcomponents-loader.js"></script>
    <link rel="import" href="../../myscript-math-web.html">

</head>
<style is="custom-style">
    .question {
        color: #1A9FFF;
        font-size: 20px;
        padding: 20px;
        background-color: lightgrey;
        height: 30px;
        max-height: 30px;
    }
    
    myscript-math-web {
        height: calc(100% - 70px);
    }
    
    .check {
        position: absolute;
        bottom: 20px;
        right: 20px;
        --paper-button-ink-color: white;
        background-color: #1A9FFF;
        color: white !important;
    }
</style>

<body>
    <!-- TODO Add a textarea where we can import latex and then edit it -->
    <!-- 

    <!-- Please change applicationkey and hmackey below with those send by mail during your registration. You can re-access them by connecting to your dashboard at developer.myscript.com with your myscript account -->
    <div class="question">What is the formula of mass energy equivalence invented by Albert Einstein ?</div>
    <myscript-math-web disableexportcontrol disableconvertcontrol debug hideexportzone apiversion="V4" scheme="https" host="newcloud.myscript.com" applicationkey="7d223f9e-a3cb-4213-ba4b-85e930605f8b" hmackey="5ab1935e-529a-4d48-a695-158450e52b13" solverfractionalpartdigit="5"
        solverdecimalseparator="," solverangleunit="rad">
    </myscript-math-web>
    <paper-fab icon="check" title="check" class="check"></paper-fab>


    <script>
        window.addEventListener('load', () => {
            const myscriptMathWebElement = document.querySelector('myscript-math-web');
            const checkElement = document.querySelector('.check');

            const exportedBehavior = function(evt) {
                console.log('exported ', evt);
                const latexExport = evt.detail.exports['application/x-latex'];
                const eEqualMC2 = "E=mc^{2}" === latexExport;
                console.log('We got E=mc2 :', eEqualMC2);
                if (eEqualMC2) {
                    checkElement.style.setProperty('background-color', "green");
                } else {
                    checkElement.style.setProperty('background-color', "red");
                }
            };
            myscriptMathWebElement.addEventListener('exported', exportedBehavior);

            const checkBehavior = function() {
                myscriptMathWebElement.convert();
                const functionOutput = myscriptMathWebElement.askForExport('application/x-latex');
                console.log('Output :' + functionOutput);
            }
            checkElement.addEventListener('click', checkBehavior);
        })
    </script>
</body>

</html>